<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:ClimbTrack.ViewModels"
             x:Class="ClimbTrack.Views.LoginPage"
             x:DataType="viewmodel:LoginViewModel">
    
  
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15" VerticalOptions="Center" HorizontalOptions="FillAndExpand">
            <!-- Title -->
            <Label Text="Indoor Climbing Workouts" 
       Style="{StaticResource Headline}"
       Margin="0,0,0,20"/>
            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}"
        TextColor="Red"
        FontSize="14"
        HorizontalOptions="Center"
        IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotNullOrEmptyBoolConverter}}"
        Margin="0,5,0,0"/>
            
            <!-- Google Sign In Button -->
            <Frame Style="{StaticResource SocialButtonFrameStyle}"
       Margin="0,0,0,20">
                <Grid>
                    <HorizontalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="10">
                        <Image Source="google_g.png" HeightRequest="240" WidthRequest="240"/>

                    </HorizontalStackLayout>
                    <Button Command="{Binding GoogleSignInCommand}"
                            BackgroundColor="Transparent"
                            AutomationProperties.Name="Sign in with Google"/>
                </Grid>
            </Frame>

            <!-- Separator Line -->
            <BoxView HeightRequest="1" 
                     BackgroundColor="#E0E0E0" 
                     HorizontalOptions="FillAndExpand"
                     Margin="0,10,0,20"/>

            <!-- Email Entry -->
           <Label Text="Email" 
       Style="{StaticResource FormLabelStyle}"/>
            <Frame CornerRadius="5" 
                   HasShadow="False" 
                   BorderColor="#E0E0E0" 
                   Padding="10,0" 
                   HeightRequest="50">
                <Entry Text="{Binding Email}" 
                       Placeholder="Enter your email" 
                       PlaceholderColor="#CCCCCC"
                       TextColor="#333333"
                       Keyboard="Email"
                       VerticalOptions="Center"
                       AutomationProperties.Name="Email"
                       AutomationProperties.HelpText="Enter your email address"/>
            </Frame>

            <!-- Password Entry -->
            <Label Text="Password" TextColor="#888888" Margin="5,0,0,5"/>
            <Frame CornerRadius="5" 
                   HasShadow="False" 
                   BorderColor="#E0E0E0" 
                   Padding="10,0" 
                   HeightRequest="50">
                <Grid>
                    <Entry Text="{Binding Password}" 
                           Placeholder="Enter your password" 
                           PlaceholderColor="#CCCCCC"
                           IsPassword="True"
                           TextColor="#333333"
                           VerticalOptions="Center"
                           AutomationProperties.Name="Password"
                           AutomationProperties.HelpText="Enter your password"/>
                    <Image Source="eye_icon.png" 
                           HeightRequest="24" 
                           WidthRequest="24"
                           HorizontalOptions="End"
                           VerticalOptions="Center"/>
                </Grid>
            </Frame>

           

            <!-- Login Button -->
            <Button Text="Login" 
                    Command="{Binding LoginCommand}"
                    BackgroundColor="#E08D69" 
                    TextColor="White" 
                    CornerRadius="25"
                    HeightRequest="50"
                    FontSize="16"
                    Margin="0,15,0,15"
                    AutomationProperties.Name="Login"/>

            <!-- Register Link -->
            <Label Text="Register" 
       Style="{StaticResource LinkLabelStyle}"
       HorizontalOptions="Center">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding RegisterCommand}"/>
                </Label.GestureRecognizers>
            </Label>

            <!-- Loading Overlay -->
            <Grid VerticalOptions="FillAndExpand" 
                  HorizontalOptions="FillAndExpand"
                  BackgroundColor="#80000000"
                  IsVisible="{Binding IsBusy}"
                  InputTransparent="False">
                <VerticalStackLayout HorizontalOptions="Center"
                                     VerticalOptions="Center">
                    <ActivityIndicator IsRunning="{Binding IsBusy}"
                                       Color="White"/>
                    <Label Text="{Binding BusyText}"
                           TextColor="White"
                           Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Grid>
        </VerticalStackLayout>
    </ScrollView>
       
</ContentPage>